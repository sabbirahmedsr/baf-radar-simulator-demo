<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BAF RADAR SIMULATOR</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header id="main-header">
    <h1>BAF RADAR SIMULATOR</h1>
    <nav>
      <a href="#simulator" class="nav-link active" data-view="simulator-view">Simulator</a>
      <a href="#planning" class="nav-link" data-view="planning-view">Project Planning</a>
      <a href="#inspiration" class="nav-link" data-view="inspiration-view">Inspiration</a>
      <a href="#asset" class="nav-link" data-view="asset-view">Asset</a>
    </nav>
  </header>

  <main>
    <div id="simulator-view" class="view active">
      <div id="top">
        <canvas id="altitudeGraphVerticalCanvas" width="120" height="800"></canvas>
        <div id="radarContainer">
          <canvas id="radarCanvas" width="800" height="800"></canvas>
        </div>
        <div id="sidePanel">
          <h3>Selected Target</h3>
          <div id="dataPanel" class="dataBlock">No selection</div>
          <div id="guiCommandPanel">
            <h4>Issue Command</h4>
            <div class="gui-command-row">
              <label for="guiCmdHeading">Heading (0-359)</label>
              <div class="input-group">
                <input type="number" id="guiCmdHeading" placeholder="e.g., 270">
                <button id="guiSendHeading">Set</button>
              </div>
            </div>
            <div class="gui-command-row">
              <label for="guiCmdAltitude">Altitude (ft)</label>
              <div class="input-group">
                <input type="number" id="guiCmdAltitude" placeholder="e.g., 9000" step="1000">
                <button id="guiSendAltitude">Set</button>
              </div>
            </div>
            <div class="gui-command-row">
              <label for="guiCmdSpeed">Speed (kts)</label>
              <div class="input-group">
                <input type="number" id="guiCmdSpeed" placeholder="e.g., 250">
                <button id="guiSendSpeed">Set</button>
              </div>
            </div>
            <div class="gui-command-row">
              <button id="guiSendHold">Engage Hold</button>
            </div>
          </div>
          <h3 class="collapsible-header active">Controls</h3>
          <div class="collapsible-content">
            <div class="control-group">
              <h4>Aircraft</h4>
              <button id="addAircraftBtn">Add Aircraft</button>
              <button id="addVGHSAircraftBtn">Add Hypersonic</button>
              <button id="removeAircraftBtn">Remove Sel.</button>
            </div>
            <div class="control-group">
              <h4>Display & Radar</h4>
              <label>Range (km): <input id="radarRangeInput" type="number" value="100" min="50" max="500"></label>
              <label><input id="toggleID" type="checkbox" checked> Show ID</label>
              <label><input id="toggleSpeed" type="checkbox" checked> Show Speed</label>
              <label><input id="toggleAltitude" type="checkbox" checked> Show Altitude</label>
              <label><input id="toggleHeading" type="checkbox" checked> Show Heading</label>
              <label><input id="toggleTrails" type="checkbox" checked> Show Trails</label>
            </div>
          </div>
          <h3 class="collapsible-header">Command Help</h3>
          <div class="collapsible-content">
            <div class="control-group">
              <p class="help-desc">Commands are in the format: <br><span class="help-command">&lt;Callsign&gt; &lt;Verb&gt; &lt;Param&gt;</span></p>
              <p><span class="help-command">C &lt;heading&gt;</span><br><span class="help-desc">Clearance to a 3-digit heading. Ex: <span class="help-command">C 090</span></span></p>
              <p><span class="help-command">C &lt;altitude&gt;</span><br><span class="help-desc">Clearance to an altitude (x1000 ft). Ex: <span class="help-command">C 12</span> (for 12,000 ft)</span></p>
              <p><span class="help-command">S &lt;speed&gt;</span><br><span class="help-desc">Set speed in knots. Ex: <span class="help-command">S 250</span></span></p>
              <p><span class="help-command">H</span><br><span class="help-desc">Hold current position.</span></p>
              <hr>
              <p class="help-desc">Commands can be chained:</p>
              <p><span class="help-command">AC101 C 270 C 8 S 210</span></p>
            </div>
          </div>
          <h3>Command Line</h3>
          <div id="cmdLine">
            <input id="cmdInput" placeholder="e.g. AC101 C 090 C 15 S 300" />
            <button id="cmdSend">Send</button>
          </div>
          <h3>Metrics</h3>
          <div id="metricsPanel" class="dataBlock">
            <div>Near-misses: <span id="metricNearMiss">0</span></div>
            <div>Conflicts resolved: <span id="metricResolved">0</span></div>
            <div>Commands issued: <span id="metricCommands">0</span></div>
          </div>
          <h3>Log</h3>
          <div id="logPanel"></div>
          <h3>Aircraft List</h3>
          <div id="aircraftList"></div>
        </div>
      </div>
    </div>

    <div id="planning-view" class="view">
      <div class="planning-container-new inspiration-container">
        <h2>Project Phoenix: Physical Simulator</h2>
        <p>Bridging the virtual and physical worlds with a real-time, synchronized hardware model.</p>

        <img src="img/plan/aiport-miniature.png" alt="Miniature airport model concept" class="plan-hero-image">

        <div class="plan-text-content">
            <h3>The Vision</h3>
            <p>This simulator will control a physical, tabletop model of an airport. When an aircraft lands on the screen, a real miniature model will land on the physical runway, perfectly in sync.</p>

            <h3>The Plan</h3>
            <ul>
                <li><strong>Step 1: Connect:</strong> Establish a connection between this web software and an Arduino microcontroller.</li>
                <li><strong>Step 2: Build:</strong> Construct a physical tabletop runway and small robotic platforms to carry miniature aircraft models.</li>
                <li><strong>Step 3: Sync:</strong> Write the code that translates simulator actions (like landing) into movement commands for the physical robots.</li>
            </ul>

            <h3>The Goal</h3>
            <p>To create a seamless, real-time link where the virtual simulation becomes the direct controller for a physical world.</p>
        </div>
      </div>
    </div>
  </main>

    <div id="asset-view" class="view">
      <div class="inspiration-container">
        <h2>Asset: Analogical Flight Instruments</h2>
        <p>A collection of flight instruments for Unity GUI, designed for flight simulators on PC and mobile devices. This asset provides a great example of modular UI components that could be adapted for a web-based simulator.</p>

        <div class="inspiration-grid">
          <div class="inspiration-item">
            <a href="https://assetstore.unity.com/packages/tools/gui/analogical-flight-instruments-gui-code-152685" target="_blank">
              <img src="https://assetstorev1-prd-cdn.unity3d.com/key-image/39571baa-f2a8-422b-be54-8c6e3d565d6a.webp" alt="Analogical Flight Instruments GUI">
              <div class="inspiration-overlay">
                <h3>Analog Gauges</h3>
                <p>Airspeed, altitude, heading, and more.</p>
              </div>
            </a>
          </div>
        </div>

        <div class="plan-text-content">
            <h3>Key Features</h3>
            <ul>
                <li>Ready to use prefabs for common flight instruments.</li>
                <li>Fully commented and customizable C# code.</li>
                <li>High-resolution graphics suitable for various screen sizes.</li>
                <li>Includes Airspeed Indicator, Altimeter, Turn Coordinator, Vertical Speed Indicator, and more.</li>
                <li>Designed to be mobile-friendly and performant.</li>
            </ul>

            <h3>Technical Details & Relevance</h3>
            <p>This asset demonstrates how to separate instrument logic from its visual representation. While built for Unity and C#, the same principles apply here. Our JavaScript `Aircraft` class holds the state (speed, altitude), and a rendering module (like `display.js`) could use that data to drive similar-looking SVG or Canvas-based gauges, creating a more immersive cockpit feel.</p>
        </div>
      </div>
    </div>

    <div id="inspiration-view" class="view">
      <div class="inspiration-container">
        <h2>Inspiration Gallery</h2>
        <p>A collection of concepts, UIs, and technologies that inspire this project.</p>
        <div class="inspiration-grid">
          <!-- Item 2 -->
          <div class="inspiration-item">
            <a href="https://skyvector.com/" target="_blank">
              <img src="img/inspiration/skyvector-thumb.png" alt="SkyVector Aeronautical Charts">
              <div class="inspiration-overlay">
                <h3>SkyVector</h3>
                <p>Real-time aeronautical charts and flight planning.</p>
              </div>
            </a>
          </div>
          <!-- Item 4 -->
          <div class="inspiration-item">
            <a href="https://hub.pilotinstitute.com/vor-app" target="_blank">
              <img src="img/inspiration/vor-app-thumb.png" alt="VOR App Simulator">
              <div class="inspiration-overlay">
                <h3>VOR App Simulator</h3>
                <p>Interactive VOR simulator for pilot training from Pilot Institute.</p>
              </div>
            </a>
          </div>
          <!-- Item 5 -->
          <div class="inspiration-item">
            <a href="https://www.youtube.com/watch?v=5tJn6MSwhFA" target="_blank">
              <img src="img/inspiration/aiport-miniature.png" alt="DIY Arduino Radar Project">
              <div class="inspiration-overlay">
                <h3>DIY Arduino Radar</h3>
                <p>A project showing a real-time radar using Arduino and Processing.</p>
              </div>
            </a>
          </div>
        </div>
      </div>
    </div>

  <script type="module" src="js/main.js"></script>
  <script>
    // Simple SPA router
    document.addEventListener('DOMContentLoaded', () => {
      const navLinks = document.querySelectorAll('.nav-link');
      const views = document.querySelectorAll('.view');

      navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
          e.preventDefault();
          const targetViewId = link.getAttribute('data-view');

          views.forEach(view => {
            view.classList.remove('active');
          });

          navLinks.forEach(navLink => {
            navLink.classList.remove('active');
          });

          document.getElementById(targetViewId).classList.add('active');
          link.classList.add('active');
          window.history.pushState({}, '', link.href);
        });
      });

    });
  </script>
</body>
</html>
